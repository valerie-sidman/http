(()=>{var e={170:()=>{const e=document.querySelector(".btn-adding-ticket"),t=document.querySelector(".new-ticket-card"),n=document.querySelector(".editing-card"),d=document.querySelector(".remove-card");function a(e,t){const n=new XMLHttpRequest,d=`https://valerie-sidorova-help-desk.herokuapp.com/?method=ticketById&id=${e}`;n.open("GET",d,!0),n.addEventListener("load",(()=>t(n))),n.send()}function r(){const e=new XMLHttpRequest;e.open("GET","https://valerie-sidorova-help-desk.herokuapp.com/?method=allTickets",!0),e.addEventListener("load",(()=>{if(200===e.status){const t=JSON.parse(e.response),i=document.querySelector(".ticket-list");i.innerHTML="",t.forEach((e=>{const t=document.createElement("li");t.setAttribute("id",e.id),t.classList.add("ticket");const s=new Date(Number.parseInt(e.created,10)),c=s.getFullYear(),o=`0${s.getMonth()+1}`,l=`0${s.getDate()}`,u=`0${s.getHours()}`,p=`0${s.getMinutes()}`,v=`0${s.getSeconds()}`,k=`${l.substr(-2)}.${o.substr(-2)}.${c} ${u.substr(-2)}:${p.substr(-2)}:${v.substr(-2)}`,b=`\n        <div class="checkbox-title-group">\n          <label class="checkbox-group">\n            <input class="checkbox" type="checkbox">\n            <div class="ticket-content"></div>\n          </label>\n          <div class="ticket-title">${e.name}</div>\n        </div>\n        <div class="button-block">\n          <div class="time-of-creation">${k}</div>\n          <button class="btn-editing-ticket button" type="submit">&#9998;</button>\n          <button class="btn-deleting-ticket button" type="submit">&#10008;</button>\n        </div>`;t.insertAdjacentHTML("afterbegin",b);const m=t.querySelector(".checkbox");m.checked="true"===e.status,i.appendChild(t);t.querySelector(".btn-editing-ticket").addEventListener("click",(e=>{e.preventDefault(),n.classList.remove("modal-inactive");n.querySelector(".short-field").value=t.querySelector(".ticket-title").textContent;const d=n.querySelector(".detailed-field");a(t.getAttribute("id"),(e=>{200===e.status&&(d.value=JSON.parse(e.response).description)}));n.querySelector(".btn-canceling").addEventListener("click",(e=>{e.preventDefault(),n.classList.add("modal-inactive")}));n.querySelector(".btn-ok").addEventListener("click",(e=>{e.preventDefault();const d=new XMLHttpRequest,a=`https://valerie-sidorova-help-desk.herokuapp.com/?method=changeTicket&id=${t.getAttribute("id")}`,i=n.querySelector(".short-field").value,s=n.querySelector(".detailed-field").value;d.open("POST",a,!0),d.addEventListener("readystatechange",(()=>{4===d.readyState&&200===d.status&&(r(),n.classList.add("modal-inactive"),n.querySelector(".short-field").value="",n.querySelector(".detailed-field").value="")}));const c=new FormData;c.append("id",t.getAttribute("id")),c.append("name",i),c.append("description",s),c.append("status",!1),c.append("created",(new Date).getTime()),d.send(c)}))}));t.querySelector(".ticket-title").addEventListener("click",(e=>{e.preventDefault(),t.querySelector(".ticket-body")?t.querySelector(".ticket-body").remove():a(t.getAttribute("id"),(e=>{if(200===e.status){const n=`\n                <div class="ticket-body">\n                  <p class="ticket-description">\n                    ${JSON.parse(e.response).description}\n                  </p>\n                </div>`;t.insertAdjacentHTML("beforeend",n)}}))}));t.querySelector(".btn-deleting-ticket").addEventListener("click",(e=>{e.preventDefault(),d.classList.remove("modal-inactive");d.querySelector(".btn-ok").addEventListener("click",(e=>{e.preventDefault();const n=new XMLHttpRequest,a=`https://valerie-sidorova-help-desk.herokuapp.com/?method=deleteTicket&id=${t.getAttribute("id")}`;n.open("GET",a,!0),n.addEventListener("load",(()=>{200===n.status&&document.getElementById(t.getAttribute("id"))&&(document.getElementById(t.getAttribute("id")).remove(),d.classList.add("modal-inactive"))})),n.send()}))})),m.addEventListener("change",(()=>{const e=new XMLHttpRequest,n=`https://valerie-sidorova-help-desk.herokuapp.com/?method=changeStatus&id=${t.getAttribute("id")}`;e.open("GET",n,!0),e.addEventListener("readystatechange",(()=>{4===e.readyState&&200===e.status&&r()})),e.send()}))}))}})),e.send()}r(),e.addEventListener("click",(e=>{e.preventDefault(),t.classList.remove("modal-inactive")}));t.querySelector(".btn-ok").addEventListener("click",(e=>{e.preventDefault();const n=new XMLHttpRequest,d=t.querySelector(".short-field").value,a=t.querySelector(".detailed-field").value;n.open("POST","https://valerie-sidorova-help-desk.herokuapp.com/?method=createTicket",!0),n.addEventListener("readystatechange",(()=>{4===n.readyState&&201===n.status&&(r(),t.classList.add("modal-inactive"),t.querySelector(".short-field").value="",t.querySelector(".detailed-field").value="")}));const i=new FormData;i.append("id",null),i.append("name",d),i.append("description",a),i.append("status",!1),i.append("created",(new Date).getTime()),n.send(i)}));t.querySelector(".btn-canceling").addEventListener("click",(e=>{e.preventDefault(),t.classList.add("modal-inactive"),t.querySelector(".short-field").value="",t.querySelector(".detailed-field").value=""}))}},t={};function n(d){if(t[d])return t[d].exports;var a=t[d]={exports:{}};return e[d](a,a.exports,n),a.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var d in t)n.o(t,d)&&!n.o(e,d)&&Object.defineProperty(e,d,{enumerable:!0,get:t[d]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";n(170)})()})();